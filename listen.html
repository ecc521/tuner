<input id="freq" placeholder="Type Frequency (Hertz)" type="number" onchange="freq()">
<button id="control"></button>

<script>

function getid(n){return document.getElementById(n)}

function notefreq(name) {
    //Turn the note name into name and octave
    parent.notefromname(name.slice(0,1), name.slice(1))
}

window.AudioContext = window.AudioContext || window.webkitAudioContext
let ctx = new AudioContext()

window.osc = ctx.createOscillator();
osc.type = "sine"
     

function setactive(boolean) {
  let control = getid("control")
  if (boolean) {
    control.innerHTML = "Stop"
    window.active = true
    ctx.resume()
  } 
  else {
    control.innerHTML = "Play"
    window.active = false
    ctx.suspend() 
  }
}

    
let init = new Promise(function(resolve,reject){
    if (ctx.state === "suspended") {
        resolve()
    }
    else {
        ctx.suspend.then(resolve)
    }
})

init.then(function(){
    osc.connect(ctx.destination);
    osc.start()
})



    
    
    
getid("control").addEventListener("click", function() {
    setactive(!window.active)
})
      
  
    

function freq() {
    let value = getid("freq").value
    value = Math.max(20, value)
    value = Math.min(value, 20000)
    getid("freq").value = value
    osc.frequency.value = value
}
    
    

    
    
    

</script>
